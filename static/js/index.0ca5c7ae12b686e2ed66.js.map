{"version":3,"sources":["/home/travis/build/firstclasspostcodes/geohash/docs/embeds/contains.js","/home/travis/build/firstclasspostcodes/geohash/docs/embeds/ranges.js","/home/travis/build/firstclasspostcodes/geohash/docs/embeds/simpleKey.js","/home/travis/build/firstclasspostcodes/geohash/docs/embeds/query.js","/home/travis/build/firstclasspostcodes/geohash/docs/index.mdx"],"names":["contains","ranges","simpleKey","query","layoutProps","MDXLayout","MDXContent","_ref","components","props","Object","objectWithoutProperties","index_es","assign","mdxType","id","parentName","href","src","alt","react_runkit_default","a","source","nodeVersion","isMDXComponent"],"mappings":"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","file":"static/js/index.7a8c88a1.js","sourcesContent":["export default `\nconst { BoundingBox } = require('@firstclasspostcodes/geohash');\n\nconst center = { latitude: 48.97415, longitude: -13.94988 };\n\n// ~50km due east\nconst location = { latitude: 49.0009, longitude: -13.333 };\n\n// create a bounding box with a radius 50km\nconst box = new BoundingBox(center.latitude, center.longitude, 50 * 1000);\n\nbox.contains(location.latitude, location.longitude);\n`;","export default `\nconst { BoundingBox } = require('@firstclasspostcodes/geohash');\n\nconst center = { latitude: 48.97415, longitude: -13.94988 };\n\n// create a bounding box with a radius 50km\nconst box = new BoundingBox(center.latitude, center.longitude, 50 * 1000);\n\nconst ranges = box.hashRanges(7);\n\nranges[0];\n`;","export default `\nconst { Key } = require('@firstclasspostcodes/geohash');\n\nconst center = { latitude: 48.97415, longitude: -13.94988 };\n\n// create our hash key\nconst key = Key.fromDegrees(center);\n\n// set a key length (7 is best for 1km);\nconst keyLength = 7;\n\nkey.toKeyObject(keyLength);\n`;","export default `\nconst { Query } = require('@firstclasspostcodes/geohash');\nconst { DynamoDB } = require('aws-sdk');\n\nconst docClient = new DynamoDB.DocumentClient({\n  service: new DynamoDB({ region: process.env.AWS_REGION }),\n  params: {\n    TableName: process.env.MY_TABLE,\n    IndexName: process.env.POINT_INDEX_NAME,\n  },\n});\n\nconst center = { latitude: 48.97415, longitude: -13.94988 };\n\nconst query = new Query(docClient);\n\n// find matching points up to 50km away\nawait query.find(center, 50 * 1000);\n`;","/* @jsx mdx */\n  import React from 'react'\n  import { mdx } from '@mdx-js/react'\n  /* @jsx mdx */\nimport Embed from 'react-runkit'\nimport contains from './embeds/contains';\nimport ranges from './embeds/ranges';\nimport simpleKey from './embeds/simpleKey';\nimport query from './embeds/query';\n\nconst makeShortcode = name => function MDXDefaultShortcode(props) {\n  console.warn(\"Component \" + name + \" was not imported, exported, or provided by MDXProvider as global scope\")\n  return <div {...props}/>\n};\n\nconst layoutProps = {\n  \n};\nconst MDXLayout = \"wrapper\"\nexport default function MDXContent({\n  components,\n  ...props\n}) {\n  return <MDXLayout {...layoutProps} {...props} components={components} mdxType=\"MDXLayout\">\n\n\n    <h1 {...{\n      \"id\": \"geohash\"\n    }}>{`Geohash`}</h1>\n    <p><a parentName=\"p\" {...{\n        \"href\": \"https://www.npmjs.com/package/@firstclasspostcodes/geohash\"\n      }}><img parentName=\"a\" {...{\n          \"src\": \"https://img.shields.io/npm/v/geohash.svg\",\n          \"alt\": \"NPM\"\n        }}></img></a>{` `}<a parentName=\"p\" {...{\n        \"href\": \"https://standardjs.com\"\n      }}><img parentName=\"a\" {...{\n          \"src\": \"https://img.shields.io/badge/code_style-standard-brightgreen.svg\",\n          \"alt\": \"JavaScript Style Guide\"\n        }}></img></a>{` `}<a parentName=\"p\" {...{\n        \"href\": \"https://travis-ci.org/firstclasspostcodes/geohash\"\n      }}><img parentName=\"a\" {...{\n          \"src\": \"https://travis-ci.org/firstclasspostcodes/geohash.svg?branch=master\",\n          \"alt\": \"Build Status\"\n        }}></img></a>{` `}<a parentName=\"p\" {...{\n        \"href\": \"https://greenkeeper.io/\"\n      }}><img parentName=\"a\" {...{\n          \"src\": \"https://badges.greenkeeper.io/firstclasspostcodes/geohash.svg\",\n          \"alt\": \"Greenkeeper badge\"\n        }}></img></a>{` `}<a parentName=\"p\" {...{\n        \"href\": \"https://codecov.io/gh/firstclasspostcodes/geohash\"\n      }}><img parentName=\"a\" {...{\n          \"src\": \"https://codecov.io/gh/firstclasspostcodes/geohash/branch/master/graph/badge.svg\",\n          \"alt\": \"codecov\"\n        }}></img></a></p>\n    <p>{`At Firstclasspostcodes, we use geohashes inside DynamoDB to quickly retrieve matching postcodes for a particular coordinate. Our solution has been adapted from `}<a parentName=\"p\" {...{\n        \"href\": \"https://aws.amazon.com/blogs/mobile/geo-library-for-amazon-dynamodb-part-1-table-structure/\"\n      }}>{`this original blog post`}</a>{` and we've extracted some of the code from an `}<a parentName=\"p\" {...{\n        \"href\": \"https://github.com/rh389/dynamodb-geo.js\"\n      }}>{`existing NPM library`}</a>{` to suit our own purposes.`}</p>\n    <h2 {...{\n      \"id\": \"install\"\n    }}>{`Install`}</h2>\n    <pre><code parentName=\"pre\" {...{}}>{`npm i @firstclasspostcodes/geohash --save\n`}</code></pre>\n    <h2 {...{\n      \"id\": \"key\"\n    }}>{`Key`}</h2>\n    <p>{`We can construct a hash key with the following:`}</p>\n    <Embed source={simpleKey} nodeVersion=\"11\" mdxType=\"Embed\" />\n    <p>{`This products an object consisting of a `}<em parentName=\"p\">{`\"hash key\"`}</em>{`  (`}<inlineCode parentName=\"p\">{`geokey`}</inlineCode>{`) and `}<em parentName=\"p\">{`\"hash range\"`}</em>{` (`}<inlineCode parentName=\"p\">{`georange`}</inlineCode>{`). This is enough to start storing points, ready for querying within DynamoDB!`}</p>\n    <hr></hr>\n    <h2 {...{\n      \"id\": \"boundingbox\"\n    }}>{`BoundingBox`}</h2>\n    <p>{`Let's start testing bounding boxes by determining if a specific point is contained within the matching area of another point. A bounding box is used to produce all the matching geohash ranges for querying points within DynamoDB (or another client).`}</p>\n    <Embed source={contains} nodeVersion=\"11\" mdxType=\"Embed\" />\n    <p>{`Once a bounding box for a particular center has been constructed, its possible to produce the hash ranges (at a configurable key length) that can be marshalled into requests.`}</p>\n    <Embed source={ranges} nodeVersion=\"11\" mdxType=\"Embed\" />\n    <p>{`The length of the \"hash key\" to adopt depends on the data and types of queries you need to work with. Refer to `}<a parentName=\"p\" {...{\n        \"href\": \"https://aws.amazon.com/blogs/mobile/geo-library-for-amazon-dynamodb-part-1-table-structure/\"\n      }}>{`this blog post`}</a>{` for more information.`}</p>\n    <hr></hr>\n    <h2 {...{\n      \"id\": \"query\"\n    }}>{`Query`}</h2>\n    <p>{`Querying for matching points is relatively trivial, but only supports DynamoDB currently. It uses an instance of `}<inlineCode parentName=\"p\">{`AWS.DynamoDB.DocumentClient`}</inlineCode>{` to execute all the necessary queries (a query for each tuple returned from `}<inlineCode parentName=\"p\">{`BoundingBox#hashRanges`}</inlineCode>{`). `}</p>\n    <p>{`Lets take a look at an example below, which provides a pre-configured instance of `}<inlineCode parentName=\"p\">{`DocumentClient`}</inlineCode>{`.`}</p>\n    <Embed source={query} nodeVersion=\"11\" mdxType=\"Embed\" />\n    <p>{`The `}<inlineCode parentName=\"p\">{`docClient`}</inlineCode>{` is configured to send the `}<inlineCode parentName=\"p\">{`TableName`}</inlineCode>{` and `}<inlineCode parentName=\"p\">{`IndexName`}</inlineCode>{` along with every `}<inlineCode parentName=\"p\">{`#query`}</inlineCode>{` request.`}</p>\n    </MDXLayout>;\n}\n\nMDXContent.isMDXComponent = true;\n  "],"sourceRoot":""}